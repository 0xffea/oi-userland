--- configure	2009-07-13 16:18:16.000000000 -0700
+++ configure.ORG	2009-12-09 21:55:48.842728000 -0800
@@ -29786,6 +29786,8 @@
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 #include <stdlib.h>
+int find_stack_direction (void);
+#pragma no_inline (find_stack_direction)
  int find_stack_direction ()
  {
    static char *addr = 0;
@@ -31470,6 +31472,8 @@
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+int find_stack_direction (void);
+#pragma no_inline (find_stack_direction)
 int
 find_stack_direction ()
 {
@@ -47617,7 +47617,7 @@
     fi
 
     # if there is no readline, but we want to build with readline, we fail
-    if test "$want_to_use_readline" = "yes" && test ! -d "./cmd-line-utils/readline"
+    if test "$want_to_use_readline" = "yes" && test ! -d "$srcdir/cmd-line-utils/readline"
     then
 	{ { echo "$as_me:$LINENO: error: This commercially licensed MySQL source package can't
 	      be built with libreadline. Please use --with-libedit to use
